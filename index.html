<!DOCTYPE html>
<html lang="en">
  <head>
    <style id="page-hide">body{visibility:hidden}</style>
    <meta charset="UTF-8" />
    <link rel="icon" href="/lovable-uploads/6ae2b882-22a7-4999-9254-825d31ea2b05.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StartWise - Turn Your Ideas Into Real Businesses</title>
    <meta name="description" content="We help entrepreneurs validate, design, and launch successful startups. From feasibility studies to MVP development - your complete tech partner with 98% success rate." />
    <meta name="keywords" content="startup development, MVP development, business validation, feasibility study, UI UX design, entrepreneur services" />
    <meta name="author" content="StartWise" />

    <meta property="og:title" content="StartWise - Turn Your Ideas Into Real Businesses" />
    <meta property="og:description" content="We help entrepreneurs validate, design, and launch successful startups. From feasibility studies to MVP development - your complete tech partner with 98% success rate." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://startwise.com/og-image.jpg" />
    <meta property="og:url" content="https://startwise.com" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="StartWise - Turn Your Ideas Into Real Businesses" />
    <meta name="twitter:description" content="We help entrepreneurs validate, design, and launch successful startups. From feasibility studies to MVP development - your complete tech partner with 98% success rate." />
    <meta name="twitter:image" content="https://startwise.com/og-image.jpg" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
    
    <!-- Dynamic Hero Copy Script -->
    <script>
    (function() {
      // Get keyword from URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      const keyword = urlParams.get('keyword');
      
      if (!keyword) {
        console.log('No keyword parameter found');
        return;
      }

      console.log('Loading variant for keyword:', keyword);

      // Detect if mobile or desktop
      const isMobile = window.innerWidth < 768;

      // Fetch approved variant from database
      fetch('https://fhomiyajinehlpxbwjxl.supabase.co/functions/v1/serve-variant?keyword=' + encodeURIComponent(keyword))
        .then(response => response.json())
        .then(data => {
          if (data.error) {
            console.error('Variant fetch error:', data.error);
            return;
          }

          // Find the hero container
          const heroContainer = document.querySelector('[data-hero-container]');
          
          if (!heroContainer) {
            console.error('Could not find element with data-hero-container attribute');
            return;
          }

          // Get the appropriate text (desktop or mobile)
          const heroText = isMobile ? (data.subheadline || data.headline) : data.headline;
          
          // Replace entire content with the full hero text
          // Preserve line breaks and structure
          heroContainer.innerHTML = '<div style="white-space: pre-wrap;">' + heroText + '</div>';
          
          console.log('Dynamic hero content loaded for keyword:', keyword);
        })
        .catch(error => {
          console.error('Error loading dynamic content:', error);
        });
    })();
    </script>
    
    <!-- Page Reveal Script -->
    <script>
    (function(){
      console.log('[Page Reveal] Script starting');
      
      function reveal(){
        var s=document.getElementById('page-hide');
        if(s&&s.parentNode){
          console.log('[Page Reveal] Revealing page');
          s.parentNode.removeChild(s);
        }
      }
      
      function hasHero(){
        var el=document.querySelector('[data-hero-container]');
        var hasContent = !!(el && el.textContent && el.textContent.trim().length>0);
        console.log('[Page Reveal] hasHero check:', hasContent, el ? 'Element found' : 'Element not found', el ? 'Text length: ' + el.textContent.trim().length : '');
        return hasContent;
      }
      
      // Allow dynamic script to trigger reveal
      if (window.__HERO_READY__) {
        window.__HERO_READY__ = reveal;
      }
      
      // Check on DOMContentLoaded
      if (document.readyState==='loading') {
        document.addEventListener('DOMContentLoaded', function(){
          console.log('[Page Reveal] DOMContentLoaded fired');
          setTimeout(function(){
            if(hasHero()) reveal();
          }, 100); // Small delay to let React render
        });
      } else {
        console.log('[Page Reveal] Document already loaded');
        setTimeout(function(){
          if(hasHero()) reveal();
        }, 100);
      }
      
      // Watch for hero container to appear and get content
      var obs=new MutationObserver(function(){
        if(hasHero()){
          console.log('[Page Reveal] MutationObserver detected hero content');
          reveal();
          obs.disconnect();
        }
      });
      obs.observe(document.documentElement,{childList:true,subtree:true,characterData:true});
      
      // Fallback timeout
      setTimeout(function(){
        console.log('[Page Reveal] Timeout fallback triggered');
        reveal();
      }, 3500);
    })();
    </script>
  </body>
</html>
